$(function(){if(0<$(".swiper-container").size()&&require(["swiper"],function(){new Swiper(".swiper-container",{pagination:".swiper-pagination",spaceBetween:30,centeredSlides:!0,autoplay:5e3,autoplayDisableOnInteraction:!1,loop:!0,mode:"horizontal",paginationClickable:!0,preloadImages:!1,lazyLoading:!0})}),(0<$(".js-audio-wx").size()||0<$(".js-audio-music").size())&&require(["jquery.jplayer"],function(){$(".js-audio-wx").each(function(){$(this).jPlayer({ready:function(t){$(this).jPlayer("setMedia",{mp3:window.sysinfo.attachurl+$("#"+$(this).attr("data-id")).attr("data-src")})},playing:function(){$("#"+$(this).attr("data-id")).find(".audio-time").show(),$("#"+$(this).attr("data-id")).find(".audioLoading").hide()},play:function(){$("#"+$(this).attr("data-id")).find(".audioLoading").show()},pause:function(){"true"==$("#"+$(this).attr("data-id")).attr("data-reload")&&$(this).jPlayer("stop")},swfPath:"../web/resource/components/jplayer",supplied:"mp3,wma,wav,amr",solution:"html, flash",preload:"none",smoothPlayBar:!0,cssSelectorAncestor:"#"+$(this).attr("data-id"),cssSelector:{play:".js-play",pause:".js-pause",duration:".audio-time"}})}),$(".js-audio-music").each(function(){$(this).jPlayer({ready:function(t){$(this).jPlayer("setMedia",{mp3:window.sysinfo.attachurl+$("#"+$(this).attr("data-id")).attr("data-src")}),$(this).jPlayer("option",{loop:"true"==$("#"+$(this).attr("data-id")).attr("data-loop")})},playing:function(){$("#"+$(this).attr("data-id")).find(".audio-time").show(),$("#"+$(this).attr("data-id")).find(".audioLoading").hide(),$("#"+$(this).attr("data-id")).animate({height:"58px"})},play:function(){$("#"+$(this).attr("data-id")).find(".audioLoading").show()},pause:function(){"true"==$("#"+$(this).attr("data-id")).attr("data-reload")&&$(this).jPlayer("stop")},swfPath:"../web/resource/components/jplayer",supplied:"mp3,wma,wav,amr",solution:"html, flash",preload:"none",smoothPlayBar:!0,cssSelectorAncestor:"#"+$(this).attr("data-id"),cssSelector:{play:".js-play",pause:".js-pause",stop:".js-stop",currentTime:".audio-current-time",duration:".audio-duration",playBar:".slider-fill",seekBar:".slider-bar"}})})}),$(".notice-box").each(function(){var t=0,a=$(this).find(".js-scroll-notice"),e=$(this);setInterval(function(){--t+a.width()<0&&(t=e.width()),a.css({left:t})},25)}),$(".js-quickmenu div").removeClass("on"),$(".js-quickmenu .js-quickmenu-toggle").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),$(".js-quickmenu .nav-group-item").removeClass("on")):($(this).addClass("on"),$(".js-quickmenu .nav-group-item").addClass("on"))}),$(".js-quickmenu a[data-toggle='dropdown']").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),$(this).next("dl").hide()):($(".js-quickmenu a[data-toggle='dropdown']").removeClass("on"),$(".js-quickmenu dl").hide(),$(this).addClass("on"),$(this).next("dl").show())}),$(function(){$("form.js-ajax-form").submit(function(t){return $(this).data("submit",1),$('button[type="submit"]').prop("disabled",!0),$.ajax(this.action,{method:this.method.toUpperCase(),data:new FormData(this),cache:!1,processData:!1,contentType:!1,dataType:"json"}).done(function(t){$(this).data("submit",0),"success"==t.type?util.toast(t.message,t.redirect,"success"):(util.toast(t.message,"","error"),$('button[type="submit"]').prop("disabled",!1),util.toast(t.message,t.redirect,"error"))}).fail(function(t){$(this).data("submit",0),util.toast("操作失败，请重试","","error")}),t.preventDefault(),!1})}),0<$(".panes").size()||0<$(".mc-we7-home").size()){var t,a=1,e=window.screen.width,i=window.screen.height;e=320/568<e/i?(t=(e/(a=i/568)-320)/2,"320px"):((i/(a=e/320)-568)/2,"100%"),window!=window.top&&$(".container").css({width:"100%",height:"100%",overflow:"hidden","transform-origin":"top left",transform:"scale("+a+")"}),$(".container div").eq(0).css({width:e,marginLeft:t}),$("meta[name='viewport']").attr("content","width=320, initial-scale="+a+", maximum-scale="+a+", user-scalable=no")}0<$(".panes").size()&&require(["hammer"],function(c){1==$(".pane").size()&&$("body").css({overflow:"hidden"});var l=0,h=0,p=0;$("div[type]");$("div[type]").each(function(){var t=$(this).attr("type").substring(0,3);if("adi"===t)var a=$(this).find("div[class='app-adImg']");else a=$(this).find("div[class^='app-"+t+"']");var e=a.attr("style"),i=e.match(/animation\:(?:\s*)(\w+)\s+\d+/);if(null!==i&&a.data("animateName",i[1]),a.data("animateName")){var n=e.replace(/(-(?:webkit|moz|o|ms)-)?animation\:(?:\s*)(?:\w+)\s+(\d+)/g,"$1animation: noEffect $2");a.attr("style",n)}});window[c.prefixed(window,"requestAnimationFrame")];function u(t,a,e){return t&c.DIRECTION_HORIZONTAL?a:e}function t(t,a){this.container=t,this.direction=a,this.panes=Array.prototype.slice.call($(this.container).children(".pane"),0),this.containerSize=this.container[u(a,"offsetWidth","offsetHeight")],this.currentIndex=0,this.hammer=new c.Manager(this.container),this.hammer.add(new c.Pan({direction:this.direction,threshold:10})),this.hammer.on("panstart panmove panend pancancel",c.bindFn(this.onPan,this)),this.show(this.currentIndex)}t.prototype={show:function(t,a,e,i){e=e||0;var n=t;t=n>this.panes.length-1?0:n<0?this.panes.length-1:Math.max(0,Math.min(t,this.panes.length-1));var s,r,o,d=this.container.className;for(i?-1===d.indexOf("animate")&&(this.container.className+=" animate"):-1!==d.indexOf("animate")&&(this.container.className=d.replace("animate","").trim()),s=0;s<this.panes.length;s++)if(r=this.containerSize/100*(100*(s-t)+e),o=this.direction&c.DIRECTION_HORIZONTAL?"translate3d("+r+"px, 0, 0)":"translate3d(0, "+r+"px, 0)",this.panes[s].style.transform=o,this.panes[s].style.mozTransform=o,this.panes[s].style.webkitTransform=o,t!=a){if(a==s)$(".pane").eq(s).find("div[type]").each(function(){var t=$(this).attr("type").substring(0,3);if("adi"===t)var a=$(this).find("div[class='app-adImg']");else a=$(this).find("div[class^='app-"+t+"']");var e=a.attr("style").replace(/(-(?:webkit|moz|o|ms)-)?animation\:(?:\s*)(?:\w+)\s+(\d+)/g,"$1animation: noEffect $2");a.attr("style",e)});if(t==s)$(".pane").eq(s).find("div[type]").each(function(){var t=$(this).attr("type").substring(0,3);if("adi"===t)var a=$(this).find("div[class='app-adImg']");else a=$(this).find("div[class^='app-"+t+"']");var e=a.attr("style"),i=a.data("animateName"),n=e.replace(/(-(?:webkit|moz|o|ms)-)?animation\:(?:\s*)(?:\w+)\s+(\d+)/g,"$1animation: "+i+" $2");a.attr("style",n)})}this.currentIndex=t},onPan:function(t){if(1==$(".pane").size()){$("body").css({overflow:"hidden"});var a=$(".panes").parent().css("height"),e=t.deltaY-l;if(h+=e,(p-=e)<0)return l=h=p=0,!1;if(p+568>parseInt(a))return p=parseInt(a)-568,h=-(parseInt(a)-568),l=0,!1;if(parseInt(a)>Math.abs(p)&&0<=p){var i=$(".alock");if(0<i.length)for(var n=0;n<i.length;n++)$(i.get(n)).parent("div").css({transform:"translate3d(0, "+-h+"px, 0)","-moz-transform":"translate3d(0, "+-h+"px, 0)","-webkit-transform":"translate3d(0, "+-h+"px, 0)","z-index":"2"});$(".pane").css({transform:"translate3d(0, "+-p+"px, 0)","-moz-transform":"translate3d(0, "+-p+"px, 0)","-webkit-transform":"translate3d(0, "+-p+"px, 0)","z-index":"1"})}l=t.deltaY?t.deltaY:0,"panend"!=t.type&&"pancancel"!=t.type||(l=0)}else{var s=u(this.direction,t.deltaX,t.deltaY),r=100/this.containerSize*s,o=!1,d=this.currentIndex;"panend"!=t.type&&"pancancel"!=t.type||(10<Math.abs(r)&&"panend"==t.type&&(this.currentIndex+=r<0?1:-1),o=!(r=0)),this.show(this.currentIndex,d,r,o)}}},new t(document.querySelector(".panes"),c.DIRECTION_VERTICAL).hammer.get("pan"),$(window).on("scroll.elasticity",function(t){t.preventDefault()}).on("touchmove.elasticity",function(t){t.preventDefault()}),$(window).delegate("img","mousemove",function(t){t.preventDefault()})})});